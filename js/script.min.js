// Mobile menu and performance optimizations
document.addEventListener('DOMContentLoaded',function(){
    // Mobile menu - only on mobile
    if(window.innerWidth<=768){
        const m=document.querySelector('.mobile-menu'),n=document.querySelector('.nav-links');
        m&&n&&(m.addEventListener('click',e=>{
            e.stopPropagation(),n.classList.toggle('active')
        }),document.addEventListener('click',e=>{
            n&&m&&!n.contains(e.target)&&!m.contains(e.target)&&n.classList.remove('active')
        }),document.querySelectorAll('.nav-links a').forEach(t=>{
            t.addEventListener('click',()=>n.classList.remove('active'))
        }))
    }
    // Form handling
    const f=document.getElementById('contactForm');
    if(f){
        f.addEventListener('submit',e=>{
            e.preventDefault();
            const t=new FormData(f);let o=!0;
            t.forEach((e,t)=>{'message'!==t&&!e.trim()&&(o=!1)});
            if(o){
                const e=f.querySelector('button[type="submit"]'),t=e.textContent;
                e.textContent='Sending...',e.disabled=!0,setTimeout(()=>{
                    alert('Thank you! We will get back to you soon.'),f.reset(),e.textContent=t,e.disabled=!1
                },1e3)
            }else alert('Please fill in all required fields.')
        })
    }
    // Lazy loading for background images
    if('IntersectionObserver'in window){
        const e=document.querySelectorAll('.service-img[data-src]'),t=new IntersectionObserver(e=>{
            e.forEach(e=>{e.isIntersecting&&(e.target.style.backgroundImage=`url(${e.target.dataset.src})`,t.unobserve(e.target))})
        });
        e.forEach(e=>t.observe(e))
    }
});